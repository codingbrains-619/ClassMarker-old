create database classmarker;

use classmarker;

create table app_startup(user_time varchar(50) UNIQUE NOT NULL,status char(1) default 'Y');

insert into app_startup (user_time) values("First Time");

create table user_mst(uid integer AUTO_INCREMENT,userid varchar(50) UNIQUE NOT NULL,contact varchar(20),email varchar(50) unique not null,password varchar(50) not null,status char(1) default 'Y', primary key(uid));

insert into user_mst(userid,email,password) values("admin","admin@gmail.com","admin");

create table subject_mst(sid integer AUTO_INCREMENT,subjectcode varchar(50) UNIQUE NOT NULL,subjectid int unique not null,subjectname varchar(50) unique not null,subjectdesc varchar(100) not null,status char(1) default 'Y', primary key(sid));

create table semester_mst(semid integer AUTO_INCREMENT,semestername varchar(50) unique not null,semesterdesc varchar(100) not null,status char(1) default 'Y', primary key(semid));

create table branch_mst(branchid integer AUTO_INCREMENT,branchname varchar(50) unique not null,branchdesc varchar(100) not null,status char(1) default 'Y', primary key(branchid));

CREATE TABLE SUBJECT_BRANCH_SEMESTER_MAPPING (MAPID integer AUTO_INCREMENT, SUBJECTID INTEGER REFERENCES subject_mst(sid) ON DELETE CASCADE,branchid INTEGER REFERENCES branch_mst(branchid) ON DELETE CASCADE ,semesterid INTEGER REFERENCES semester_mst(semid) ON DELETE CASCADE ,STATUS CHAR(1) DEFAULT 'Y',primary key(MAPID));

select subject_mst.subjectcode, subject_mst.subjectid, subject_mst.subjectname, subject_mst.subjectdesc, branch_mst.branchname, semester_mst.semestername from subject_mst, branch_mst, semester_mst, subject_branch_semester_mapping where subject_mst.sid=subject_branch_semester_mapping.subjectid and branch_mst.branchid=subject_branch_semester_mapping.branchid and semester_mst.semid=subject_branch_semester_mapping.semesterid;
